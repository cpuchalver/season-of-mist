{% schema %}
{
  "name": "Carousel",
  "settings": [
    {
      "type": "header",
      "content": "Carousel Settings"
    },
    {
      "type": "range",
      "id": "slides_to_show",
      "label": "Number of slides to show",
      "min": 1,
      "max": 10,
      "step": 1,
      "default": 3
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Enable autoplay",
      "default": true
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "label": "Autoplay speed (ms)",
      "min": 1000,
      "max": 10000,
      "step": 1000,
      "default": 3000
    }
  ],
  "blocks": [
    {
      "type": "carousel_item",
      "name": "Carousel Item",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Title" },
        { "type": "textarea", "id": "description", "label": "Description" },
        { "type": "text", "id": "link", "label": "Link" }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Default",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div
  class="carousel"
  data-slides-to-show="{{ section.settings.slides_to_show }}"
  data-autoplay="{{ section.settings.autoplay }}"
  data-autoplay-speed="{{ section.settings.autoplay_speed }}"
>
  <div class="carousel-inner">
    {% for block in section.blocks %}
      {% if block.type == 'carousel_item' %}
        {% render 'carousel-item', item: block.settings %}
      {% endif %}
    {% endfor %}
  </div>

  <button class="carousel-control-prev" type="button" aria-label="{{ 'carousel.navigation.prev' | t }}">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
  </button>
  <button class="carousel-control-next" type="button" aria-label="{{ 'carousel.navigation.next' | t }}">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
  </button>
</div>

{%- comment -%}
  The actual JavaScript behaviour lives in `assets/carousel.js`.
  This section only exposes settings to the DOM via data-attributes.
{%- endcomment -%}
